# UAV Delivery API

API для веб-сайта доставки в труднодоступные места с использованием беспилотных летательных аппаратов (БПЛА).

## Описание

Этот проект предоставляет API для управления пользователями, авторизацией, регистрацией, проверкой прав доступа и другими функциями, связанными с доставкой с использованием БПЛА. API построен на основе FastAPI и включает интеграцию с MongoDB, MySQL и Redis.

## Основные функции

- **Регистрация пользователей**: Создание новых учетных записей с проверкой уникальности логина, email и телефона.
- **Авторизация**: Вход пользователей с проверкой логина и пароля.
- **Управление правами доступа**: Установка и проверка прав доступа для пользователей.
- **Логирование**: Запись действий пользователей, таких как регистрация, вход, изменение прав доступа.
- **Кэширование**: Использование Redis для хранения временных данных, таких как sitemap.
- **Файлы**: Генерация `sitemap.xml` и `robots.txt`.

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/alxprgs/UAV-Delivery-API.git
   cd UAV-Delivery-API
   ```

2. Убедитесь, что у вас установлен Python 3.13 и Docker (опционально).

3. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

4. Настройте переменные окружения в файле `.env`:
   ```plaintext
   MONGO_URL=mongodb://<username>:<password>@<host>/
   MYSQL_URL=mysql+asyncmy://<username>:<password>@<host>/<database>
   REDIS_HOST=<host>
   REDIS_PORT=<port>
   REDIS_PASSWORD=<password>
   DOMAIN=<your-domain>
   ```

5. Настройте базы данных:
   - MongoDB: Убедитесь, что индексы создаются автоматически при запуске.
   - MySQL: Таблицы создаются автоматически при запуске приложения.

## Запуск

### Локально

1. Запустите сервер:
   ```bash
   python run.py
   ```

2. API будет доступен по адресу: `http://localhost:<SERVER_PORT>`.

### С использованием Docker

1. Соберите Docker-образ:
   ```bash
   docker build -t uav-delivery-api .
   ```

2. Запустите контейнер:
   ```bash
   docker run -p 5000:5000 --env-file .env uav-delivery-api
   ```

## Тестирование

Для запуска тестов используйте `pytest`:
```bash
pytest
```

Для нагрузочного тестирования используйте `k6`:
```bash
k6 run server/core/tests/full_test.js
```

## Документация API

Документация доступна по адресу:
- Swagger UI: `http://localhost:<SERVER_PORT>/`
- ReDoc: `http://localhost:<SERVER_PORT>/redoc`

## Лицензия

Проект лицензирован под [Apache License 2.0](LICENSE).

## Контакты

Если у вас есть вопросы или предложения, свяжитесь с нами по email: `proshka20081010@gmail.com`.
